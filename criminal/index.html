<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>형사 전문 분야 - 법무법인(유한) 예일법조</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet" />
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <style>
    body {
      font-family: 'Pretendard', sans-serif;
    }

    /* 메가메뉴 스타일 */
    .mega-menu {
      position: absolute;
      left: 0;
      right: 0;
      top: 100%;
      background: white;
      transform: translateY(-10px);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      border-top: 1px solid #e5e7eb;
    }

    .mega-menu.active {
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    /* 모바일에서 메가메뉴 숨기기 */
    @media (max-width: 768px) {
      .mega-menu {
        display: none;
      }
    }

    .hero-video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .header-transparent {
      background: transparent;
      border-bottom: none;
    }

    .header-scrolled {
      background: #fff;
      border-bottom: 1px solid #f3f4f6;
      transition: all 0.3s ease;
    }

    /* 메가메뉴 열렸을 때 헤더 스타일 */
    .header-transparent.mega-menu-open {
      background: white;
      border-bottom: 1px solid #f3f4f6;
    }

    .header-transparent.mega-menu-open a {
      color: #111827 !important;
    }

    /* 모바일 메뉴 아코디언 스타일 */
    .mobile-accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .mobile-accordion-content.active {
      max-height: 300px;
      overflow-y: auto;
    }

    .mobile-accordion-arrow {
      transition: transform 0.3s ease;
    }

    .mobile-accordion-arrow.rotate {
      transform: rotate(180deg);
    }

    .floating-buttons {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      transform: translateY(100%);
      transition: transform 0.3s ease-in-out;
      z-index: 1000;
      padding: 12px 0;
    }

    .floating-buttons.show {
      transform: translateY(0);
    }

    /* 머메이드 모바일 오버레이 */
    .mermaid-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 20;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 400;
      color: #fff;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 0 10px;
      border-radius: 8px;
      pointer-events: auto;
      transition: opacity 0.5s;
      opacity: 1;
    }
    .mermaid-overlay.hide {
      opacity: 0;
      transition: opacity 0.5s;
    }
    @media (max-width: 768px) {
      .mermaid-overlay {
        display: flex;
      }
    }
  </style>
    
    <!-- Navigation and Footer Modules -->
    <script src="../assets/js/nav.js?v=2"></script>
    <script src="../assets/js/floating-banner.js"></script>
    <script src="../assets/js/breadcrumb.js"></script>
    <script src="../assets/js/footer.js"></script>
</head>


<body class="bg-white text-black">
  <!-- SERVICES -->
  <section id="services" class="py-24 lg:py-32 bg-white" x-data="{ activeTab: 'economic-crimes' }">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
      <div class="text-center mb-16 sm:mb-20">
        <span class="text-[#22304a] font-medium text-sm mb-4 block tracking-wider">OUR EXPERTISE</span>
        <h2 class="text-4xl md:text-5xl font-bold mb-4 text-[#111827]">
          형사 법률 서비스
        </h2>
        <p class="text-lg text-[#22304a] max-w-2xl mx-auto">
          형사 전문 변호사는 의뢰인의 상황을 가장 유리한 방향으로 이끌어갈 전략을 제시합니다.
        </p>
      </div>

      <!-- 탭 버튼 -->
      <div class="flex flex-wrap justify-center gap-4 mb-16">
        <button @click="activeTab = 'economic-crimes'"
          :class="activeTab === 'economic-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          경제범죄
        </button>
        <button @click="activeTab = 'sex-crimes'"
          :class="activeTab === 'sex-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          성범죄
        </button>
        <button @click="activeTab = 'violence-crimes'"
          :class="activeTab === 'violence-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          폭력범죄
        </button>
        <button @click="activeTab = 'traffic-crimes'"
          :class="activeTab === 'traffic-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          교통범죄
        </button>
        <button @click="activeTab = 'drug-crimes'"
          :class="activeTab === 'drug-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          마약범죄
        </button>
        <button @click="activeTab = 'other-crimes'"
          :class="activeTab === 'other-crimes' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          기타범죄
        </button>
      </div>

      <!-- 탭 콘텐츠 -->
      <div class="space-y-12">
        <!-- 경제범죄 -->
        <div x-show="activeTab === 'economic-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">경제범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 사기, 컴퓨터등사용사기</li>
                <li>• 횡령, 업무상횡령, 배임</li>
                <li>• 특정경제범죄가중처벌법 위반</li>
                <li>• 유사수신행위, 다단계판매</li>
                <li>• 보이스피싱, 전자금융거래법 위반</li>
                <li>• 세무범죄, 조세포탈</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>피해자 대리:</strong> 재산추적, 가압류 등 보전처분, 강제집행을 통한 피해금 회수에 최선을 다합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>피의자 변호:</strong> 사기와 민사 구분, 피해회복 노력, 특경법 배제 등을 통해 선처받을 수 있도록 합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 경제범죄 309건, 피해회수율 73%, 특경법 적용 배제율 67%
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- 성범죄 -->
        <div x-show="activeTab === 'sex-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">성범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 성폭력 (강간, 강제추행, 준강간 등)</li>
                <li>• 카메라 등 이용 촬영 (불법촬영, 몰카)</li>
                <li>• 통신매체 이용 음란 (사이버 성범죄)</li>
                <li>• 스토킹, 데이트 폭력</li>
                <li>• 직장 내 성희롱, 성폭력</li>
                <li>• 아동·청소년 성보호법 위반</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>피해자 대리:</strong> 2차 피해 방지, 증거보전, 손해배상청구, 신변보호 등 피해자 권익보호에 최선을 다합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>피의자 변호:</strong> 무죄추정 원칙 하에 철저한 사실조사와 증거분석을 통해 최선의 변호전략을 수립합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 성범죄 사건 처리 147건, 피해자 만족도 96%, 피의자 불기소율 32%
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- 폭력범죄 -->
        <div x-show="activeTab === 'violence-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">폭력범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 폭행, 상해, 중상해</li>
                <li>• 특수폭행, 특수상해</li>
                <li>• 폭력행위 등 처벌에 관한 법률 위반</li>
                <li>• 협박, 공갈, 강요</li>
                <li>• 가정폭력, 아동학대</li>
                <li>• 집단폭행, 조직폭력</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>피해자 대리:</strong> 신속한 치료지원, 손해배상 극대화, 가해자 엄벌을 위한 적극적 대응을 제공합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>피의자 변호:</strong> 정당방위, 쌍방폭행, 우발적 범행 등 유리한 정황을 최대한 활용하여 변호합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 폭력범죄 변호 312건, 불기소율 46%, 평균 합의금 370만원
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- 교통범죄 -->
        <div x-show="activeTab === 'traffic-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">교통범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 교통사고 (일반, 사망, 중상해)</li>
                <li>• 음주운전, 무면허운전</li>
                <li>• 뺑소니 (도주차량, 유기치상)</li>
                <li>• 교통사고처리특례법 위반</li>
                <li>• 특정범죄가중처벌법 (12대 중과실)</li>
                <li>• 면허정지·취소 행정소송</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>피해자 대리:</strong> 과실비율 다툼, 손해배상 극대화, 보험회사 협상 등을 통한 완전한 피해회복을 지원합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>가해자 변호:</strong> 음주측정 절차하자, 중과실 부인, 신속한 합의 등을 통해 최선의 결과를 도출합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 교통사고 523건 처리, 피해자 평균 배상액 3,400만원, 음주초범 벌금형 달성률 87%
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- 마약범죄 -->
        <div x-show="activeTab === 'drug-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">마약범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 마약 (필로폰, 코카인, 아편 등)</li>
                <li>• 향정신성의약품 (대마, 엑스터시 등)</li>
                <li>• 마약류 단순사용, 소지, 매매</li>
                <li>• 마약류제조, 운반, 수출입</li>
                <li>• 마약자금세탁, 마약관련 범죄수익</li>
                <li>• 온라인 마약거래</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>치료 중심 접근:</strong> 처벌보다는 치료와 재활을 통한 근본적 해결을 추구하며, 치료명령·수강명령을 적극 활용합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>방어 전략:</strong> 압수수색 절차하자, 증거능력 다툼, 초범 특례 등을 통해 최대한 관대한 처분을 받도록 합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 마약범죄 161건, 치료프로그램 연계 94%, 초범 기소유예율 67%
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- 기타범죄 -->
        <div x-show="activeTab === 'other-crimes'" x-transition class="border-t-4 border-[#22304a] pt-8">
          <h3 class="text-3xl font-bold text-[#111827] mb-8">기타범죄</h3>
          <div class="grid md:grid-cols-2 gap-8">
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">주요 취급 분야</h4>
              <ul class="space-y-2 text-[#22304a]">
                <li>• 절도, 강도, 손괴</li>
                <li>• 명예훼손, 모독, 사생활침해</li>
                <li>• 업무방해, 컴퓨터업무방해</li>
                <li>• 공무집행방해, 공무원모독</li>
                <li>• 위조, 변조, 허위공문서작성</li>
                <li>• 주거침입, 퇴거불응</li>
              </ul>
            </div>
            <div>
              <h4 class="text-xl font-semibold mb-4 text-[#22304a]">전문 서비스</h4>
              <p class="text-[#22304a] mb-4">
                <strong>종합적 대응:</strong> 각 범죄의 특성에 맞는 맞춤형 변호전략을 수립하여 의뢰인의 권익보호에 최선을 다합니다.
              </p>
              <p class="text-[#22304a]">
                <strong>신속한 처리:</strong> 초기 대응부터 사건 종결까지 체계적이고 전문적인 법률서비스를 제공합니다.
              </p>
              <div class="mt-4 p-4 bg-[#f3f4f6] rounded-lg">
                <p class="text-sm text-[#22304a]">
                  <strong>성과:</strong> 2024년 기타범죄 278건, 불기소율 41%, 평균 처리기간 2.3개월
                </p>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>


  <!-- PROCESS -->
  <section id="process" class="py-24 bg-gray-50 lg:py-32 scroll-mt-24" x-data="processTab">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <!-- 섹션 헤더 -->
      <div class="text-center mb-16 sm:mb-20">
        <span class="text-[#22304a] font-medium text-sm mb-4 block tracking-wider">PROCESS</span>
        <h2 class="text-4xl md:text-5xl font-bold mb-4 text-[#111827]">
          형사사건 프로세스
        </h2>
        <p class="text-lg text-w max-w-2xl mx-auto">
          디테일한 절차를 한눈에 살펴보세요. 
        </p>
      </div>

      <!-- 탭 버튼 -->
      <div class="flex justify-center gap-4 mb-8">
        <button @click="activeProcessTab = 'defense'"
          :class="activeProcessTab === 'defense' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          피의자 변호
        </button>
        <button @click="activeProcessTab = 'complaint'"
          :class="activeProcessTab === 'complaint' ? 'bg-[#22304a] text-white' : 'bg-gray-100 text-gray-700 hover:bg-gray-200'"
          class="px-6 py-3 rounded-full font-medium transition-all duration-300">
          피해자 고소
        </button>
      </div>

      <!-- Mermaid 다이어그램 - 피의자 변호 -->
      <div x-show="activeProcessTab === 'defense'" x-transition class="mx-auto relative"
        style="padding:0; background:transparent; box-shadow:none; border:none; border-radius:0;">
        <div id="mermaidOverlayDefense" class="mermaid-overlay">
           피의자 변호 프로세스를 <br>미리 확인해보세요.<br>(확대,축소 등 터치로 화면을 조작할 수 있어요.)
         </div>
        <!-- 줌 컨트롤 -->
        <div class="absolute top-4 right-4 flex gap-2 z-10">
          <button onclick="zoomDiagram(0.1, 'defense')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
              </path>
            </svg>
          </button>
          <button onclick="zoomDiagram(-0.1, 'defense')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
            </svg>
          </button>
          <button onclick="resetZoom('defense')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
              </path>
            </svg>
          </button>
        </div>

        <div id="mermaidContainerDefense" class="overflow-auto" style="height: 60vh; cursor: grab; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">
        <div id="mermaidDiagramDefense" class="mermaid transition-transform duration-300"
          style="transform: scale(1); transform-origin: center center;">

            flowchart TB
            Start([형사 문제 발생]) --> DefenseTrack[피의자 방어 트랙]

            DefenseTrack --> InitConsult[변호사 초기 상담<br>- 사건 파악<br>- 긴급성 판단]

            InitConsult -->|긴급체포| Emergency[긴급대응<br>- 체포/구속 상황]
            InitConsult -->|일반상담| Regular[일반 상담<br>- 수사 대응 전략]

            Emergency --> LawyerVisit[변호사 긴급 조치<br>- 24시간 내 접견<br>- 진술거부권 행사 조언<br>- 가족 연락]
            LawyerVisit --> WarrantReview[영장실질심사]

            WarrantReview --> LawyerWarrant[변호사 영장심사 대응<br>- 의견서 작성/제출<br>- 불구속 사유 주장<br>- 증거인멸 우려 반박]

            LawyerWarrant --> WarrantResult{구속영장<br>결정}
            WarrantResult -->|기각| Released[불구속 상태<br>수사 진행]
            WarrantResult -->|발부| Detained[구속 상태<br>수사 진행]

            Regular --> InvestStrategy[변호사 수사전략 수립<br>- 혐의 분석<br>- 증거 검토<br>- 방어 전략 구상]
            Released --> InvestStrategy
            Detained --> DetainedSupport[구속 의뢰인 지원<br>- 정기 접견<br>- 보석/구속취소 신청<br>- 심리적 지원]

            DetainedSupport --> PoliceInvest
            InvestStrategy --> PoliceInvest[경찰 수사 단계]

            PoliceInvest --> LawyerPolice[변호사 경찰단계 활동<br>- 조사 동행/참여<br>- 진술 조언<br>- 유리한 증거 제출<br>- 참고인 진술 확보]

            LawyerPolice --> ProsecutionSend[검찰 송치]

            ProsecutionSend --> ProsInvest[검찰 수사]

            ProsInvest --> LawyerPros[변호사 검찰단계 활동<br>- 검사 면담 신청<br>- 의견서 제출<br>- 합의 중재<br>- 처분 예측/대응]

            LawyerPros --> ProsDecision{검찰 처분}

            ProsDecision -->|불기소| NonPros[변호사 불기소 확인<br>- 불기소 이유 확인<br>- 의뢰인 설명]
            ProsDecision -->|약식기소| Summary[약식명령]
            ProsDecision -->|정식기소| Indictment[공소제기]

            NonPros --> End1([사건 종결])

            Summary --> LawyerSummary[변호사 약식 대응<br>- 벌금액 검토<br>- 정식재판 청구 조언]

            LawyerSummary --> SummaryChoice{정식재판<br>청구?}
            SummaryChoice -->|아니오| PayFine[벌금 납부]
            SummaryChoice -->|예| TrialPrep

            PayFine --> End2([사건 종결])

            Indictment --> TrialPrep[변호사 공판 준비<br>- 공소장 분석<br>- 증거목록 검토<br>- 변호 전략 확정]

            TrialPrep --> FirstTrial[1심 공판]

            FirstTrial --> LawyerTrial[변호사 재판 활동<br>- 공소사실 인부<br>- 증거 동의/부동의<br>- 증인 신문<br>- 피고인 신문 대응<br>-
            최종 변론]

            LawyerTrial --> Verdict{1심 판결}

            Verdict -->|무죄| Acquittal[무죄 판결<br>변호사 사후조치]
            Verdict -->|유죄| Guilty[유죄 판결]

            Acquittal --> End3([무죄 확정])

            Guilty --> LawyerAppeal[변호사 판결 분석<br>- 양형 적정성 검토<br>- 항소 이유 검토<br>- 의뢰인 상담]

            LawyerAppeal --> AppealDecision{항소 결정}

            AppealDecision -->|포기| AcceptVerdict[판결 수용]
            AppealDecision -->|항소| Appeal[항소장 제출]

            AcceptVerdict --> Execution[형 집행]

            Appeal --> LawyerAppealCourt[변호사 항소심 대응<br>- 항소이유서 작성<br>- 새로운 증거 제출<br>- 양형 부당 주장]

            LawyerAppealCourt --> AppealVerdict{항소심<br>판결}

            AppealVerdict -->|원심파기| FirstTrial
            AppealVerdict -->|항소기각| SupremeDecision{상고 검토}

            SupremeDecision -->|포기| Execution
            SupremeDecision -->|상고| Supreme[대법원]

            Supreme --> LawyerSupreme[변호사 상고심 대응<br>- 상고이유서 작성<br>- 법리 오류 주장]

            LawyerSupreme --> FinalVerdict{최종 판결}

            FinalVerdict -->|파기환송| Appeal
            FinalVerdict -->|상고기각| Execution

            Execution --> LawyerPost[변호사 사후 관리<br>- 가석방 신청<br>- 사면/복권 신청<br>- 전과 관리 조언]

            LawyerPost --> End4([종결])

            classDef lawyerAction fill:#2c5aa0,stroke:#1a3a52,color:#fff,stroke-width:2px
            classDef clientStatus fill:#ff6b6b,stroke:#c92a2a,color:#fff,stroke-width:2px
            classDef courtProcess fill:#4dabf7,stroke:#1971c2,color:#fff,stroke-width:2px
            classDef decision fill:#ffd43b,stroke:#fab005,color:#000,stroke-width:2px
            classDef endNode fill:#51cf66,stroke:#2f9e44,color:#fff,stroke-width:2px
            
            class InitConsult,LawyerVisit,LawyerWarrant,InvestStrategy,DetainedSupport,LawyerPolice,LawyerPros,NonPros,LawyerSummary,TrialPrep,LawyerTrial,LawyerAppeal,LawyerAppealCourt,LawyerSupreme,LawyerPost lawyerAction
            class Emergency,Detained,Released,PoliceInvest,ProsInvest,Summary,Indictment,FirstTrial,Guilty,Appeal,Supreme,Execution clientStatus
            class WarrantReview,ProsecutionSend,AcceptVerdict courtProcess
            class WarrantResult,ProsDecision,SummaryChoice,Verdict,AppealDecision,AppealVerdict,SupremeDecision,FinalVerdict decision
            class End1,End2,End3,End4,Acquittal endNode

          </div>
        </div>
      </div>

      <!-- Mermaid 다이어그램 - 피해자 고소 -->
      <div x-show="activeProcessTab === 'complaint'" x-transition class="mx-auto relative"
        style="padding:0; background:transparent; box-shadow:none; border:none; border-radius:0;">
        <div id="mermaidOverlayComplaint" class="mermaid-overlay">
           피해자 고소 프로세스를 <br>미리 확인해보세요.<br>(확대,축소 등 터치로 화면을 조작할 수 있어요.)
         </div>
        <!-- 줌 컨트롤 -->
        <div class="absolute top-4 right-4 flex gap-2 z-10">
          <button onclick="zoomDiagram(0.1, 'complaint')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6">
              </path>
            </svg>
          </button>
          <button onclick="zoomDiagram(-0.1, 'complaint')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"></path>
            </svg>
          </button>
          <button onclick="resetZoom('complaint')"
            class="w-10 h-10 flex items-center justify-center text-gray-600 transition-colors"
            style="background:transparent; border:none; border-radius:0;">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
              </path>
            </svg>
          </button>
        </div>

        <div id="mermaidContainerComplaint" class="overflow-auto" style="height: 60vh; cursor: grab; background: white; border: 1px solid #e0e0e0; border-radius: 8px;">
        <div id="mermaidDiagramComplaint" class="mermaid transition-transform duration-300"
          style="transform: scale(1); transform-origin: center center;">

          flowchart TB
          Start([형사 문제 발생]) --> AccuserTrack[고소인 지원 트랙]
      
          AccuserTrack --> AccuserConsult[고소인 상담<br>- 사건 경위 파악<br>- 증거 수집 조언]
      
          AccuserConsult --> ComplaintStrategy[고소 전략 수립<br>- 고소 가능성 검토<br>- 필요 증거 목록화<br>- 예상 결과 설명]
      
          ComplaintStrategy --> ComplaintType{고소 방법}
          ComplaintType -->|직접고소| DirectComplaint[직접 고소장 작성<br>- 변호사 고소장 작성<br>- 증거자료 정리<br>- 경찰서 동행]
          ComplaintType -->|고소대리| ProxyComplaint[고소대리<br>- 변호사 명의 고소<br>- 전문적 법리 구성]
      
          DirectComplaint --> PoliceAccept{경찰 접수}
          ProxyComplaint --> PoliceAccept
      
          PoliceAccept -->|접수| AccuserPolice[고소인 조사<br>- 변호사 동행<br>- 진술 조력<br>- 추가 증거 제출]
          PoliceAccept -->|불수리| AccuserAppeal[이의제기<br>- 검찰 직접 고소<br>- 불수리 사유 대응]
      
          AccuserPolice --> AccuserWait[수사 진행 모니터링<br>- 수사 진행 확인<br>- 피의자 소환 확인<br>- 추가 조치 대응]
          AccuserAppeal --> AccuserPolice
      
          AccuserWait --> AccuserPros[검찰 단계<br>- 고소인 조사 대응<br>- 의견서 제출<br>- 처분 결과 확인]
      
          AccuserPros --> AccuserDecision{검찰 처분}
          AccuserDecision -->|기소| AccuserTrial[재판 참여<br>- 증인 출석<br>- 피해 진술<br>- 합의 여부 결정]
          AccuserDecision -->|불기소| AccuserReview{불기소 검토}
      
          AccuserReview -->|수용| AccuserEnd1([고소 종결])
          AccuserReview -->|불복| AccuserAppealPros[항고/재정신청<br>- 검찰 항고<br>- 법원 재정신청]
      
          AccuserAppealPros --> AccuserCourt{재정신청 결과}
          AccuserCourt -->|인용| AccuserTrial
          AccuserCourt -->|기각| AccuserEnd2([최종 종결])
      
          AccuserTrial --> AccuserVerdict[판결 확인<br>- 피해 회복<br>- 민사소송 연계]
          AccuserVerdict --> AccuserEnd3([사건 종결])
      
          classDef accuserAction fill:#9775fa,stroke:#7048e8,color:#fff,stroke-width:2px
          classDef accuserStatus fill:#ff8787,stroke:#fa5252,color:#fff,stroke-width:2px
          classDef accuserDecision fill:#fcc419,stroke:#f59f00,color:#000,stroke-width:2px
          classDef endNode fill:#51cf66,stroke:#2f9e44,color:#fff,stroke-width:2px
          
          class AccuserConsult,ComplaintStrategy,DirectComplaint,ProxyComplaint,AccuserPolice,AccuserAppeal,AccuserWait,AccuserPros,AccuserAppealPros,AccuserTrial,AccuserVerdict accuserAction
          class AccuserTrack accuserStatus
          class ComplaintType,PoliceAccept,AccuserDecision,AccuserReview,AccuserCourt accuserDecision
          class AccuserEnd1,AccuserEnd2,AccuserEnd3 endNode

          </div>
        </div>
      </div>
    </div>
  </section>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
  <script>
    // Mermaid 초기화 - Alpine.js와의 타이밍 문제 해결을 위해 수동으로 렌더링
    mermaid.initialize({
      startOnLoad: false,  // 자동 시작 비활성화
      theme: 'neutral',
      flowchart: {
        htmlLabels: true,
        curve: 'basis',
        nodeSpacing: 50,
        rankSpacing: 50
      }
    });

    // 다이어그램 원본 텍스트 저장
    const mermaidDiagramTexts = {};
    
    // 페이지 로드시 원본 텍스트 저장 - 자동으로 모든 mermaid 다이어그램 감지
    document.addEventListener('DOMContentLoaded', () => {
      // data-tab 속성을 가진 모든 mermaid 요소를 찾아서 저장
      const mermaidElements = document.querySelectorAll('.mermaid[id^="mermaidDiagram"]');
      
      mermaidElements.forEach(element => {
        // ID에서 탭 이름 추출 (예: mermaidDiagramDefense -> defense)
        const tabName = element.id.replace('mermaidDiagram', '').toLowerCase();
        if (tabName) {
          mermaidDiagramTexts[tabName] = element.textContent.trim();
          console.log(`Stored diagram for tab: ${tabName}`);
        }
      });
    });

    // Alpine.js가 렌더링된 후 Mermaid 다이어그램 렌더링
    function renderMermaidDiagrams(specificTab = null) {
      if (!specificTab) return;
      
      // 동적으로 탭 이름을 기반으로 요소 찾기
      const elementId = `mermaidDiagram${specificTab.charAt(0).toUpperCase() + specificTab.slice(1)}`;
      const element = document.getElementById(elementId);
      
      if (element && mermaidDiagramTexts[specificTab]) {
        // 기존 내용 모두 제거
        element.innerHTML = '';
        element.removeAttribute('data-processed');
        element.textContent = mermaidDiagramTexts[specificTab];
        
        // mermaid 렌더링
        try {
          mermaid.init(undefined, element);
          console.log(`Rendered diagram for tab: ${specificTab}`);
        } catch (e) {
          console.error(`Mermaid rendering error for ${specificTab}:`, e);
        }
      } else {
        console.warn(`No diagram found for tab: ${specificTab}`);
      }
    }

    // 드래그 기능 구현 함수
    function setupDragFeature(containerId, diagramId) {
      const container = document.getElementById(containerId);
      const diagram = document.getElementById(diagramId);
      if (!container || !diagram) return;

      let isDragging = false;
      let startX, startY, scrollLeft, scrollTop;

      container.addEventListener('mousedown', (e) => {
        isDragging = true;
        container.style.cursor = 'grabbing';
        startX = e.pageX - container.offsetLeft;
        startY = e.pageY - container.offsetTop;
        scrollLeft = container.scrollLeft;
        scrollTop = container.scrollTop;
      });

      container.addEventListener('mouseleave', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      container.addEventListener('mouseup', () => {
        isDragging = false;
        container.style.cursor = 'grab';
      });

      container.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
        const x = e.pageX - container.offsetLeft;
        const y = e.pageY - container.offsetTop;
        const walkX = (x - startX) * 1.5;
        const walkY = (y - startY) * 1.5;
        container.scrollLeft = scrollLeft - walkX;
        container.scrollTop = scrollTop - walkY;
      });

      // 터치 이벤트 지원
      let touchStartX, touchStartY;

      container.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].pageX - container.offsetLeft;
        touchStartY = e.touches[0].pageY - container.offsetTop;
        scrollLeft = container.scrollLeft;
        scrollTop = container.scrollTop;
      });

      container.addEventListener('touchmove', (e) => {
        e.preventDefault();
        const x = e.touches[0].pageX - container.offsetLeft;
        const y = e.touches[0].pageY - container.offsetTop;
        const walkX = (x - touchStartX) * 1.5;
        const walkY = (y - touchStartY) * 1.5;
        container.scrollLeft = scrollLeft - walkX;
        container.scrollTop = scrollTop - walkY;
      });
    }

    // 두 개의 다이어그램에 대해 드래그 기능 설정
    setupDragFeature('mermaidContainerDefense', 'mermaidDiagramDefense');
    setupDragFeature('mermaidContainerComplaint', 'mermaidDiagramComplaint');

    let currentZoomDefense = window.innerWidth <= 768 ? 1: 1.2;
    let currentZoomComplaint = window.innerWidth <= 768 ? 1: 1.2;

    // 줌 기능
    function zoomDiagram(delta, type) {
      let currentZoom, diagramId;
      
      if (type === 'defense') {
        currentZoomDefense = Math.max(0.5, Math.min(2, currentZoomDefense + delta));
        currentZoom = currentZoomDefense;
        diagramId = 'mermaidDiagramDefense';
      } else {
        currentZoomComplaint = Math.max(0.5, Math.min(2, currentZoomComplaint + delta));
        currentZoom = currentZoomComplaint;
        diagramId = 'mermaidDiagramComplaint';
      }
      
      const diagram = document.getElementById(diagramId);
      if (diagram) {
        diagram.style.transform = `scale(${currentZoom})`;
        diagram.style.transformOrigin = 'top left';
        diagram.style.width = `${100 * currentZoom}%`;
        diagram.style.height = `${100 * currentZoom}%`;
      }
    }

    function resetZoom(type) {
      const defaultZoom = 1.2;
      let diagramId;
      
      if (type === 'defense') {
        currentZoomDefense = defaultZoom;
        diagramId = 'mermaidDiagramDefense';
      } else {
        currentZoomComplaint = defaultZoom;
        diagramId = 'mermaidDiagramComplaint';
      }
      
      const diagram = document.getElementById(diagramId);
      if (diagram) {
        diagram.style.transform = `scale(${defaultZoom})`;
        diagram.style.transformOrigin = 'top left';
        diagram.style.width = `${100 * defaultZoom}%`;
        diagram.style.height = `${100 * defaultZoom}%`;
      }
    }
  </script>


  <!-- FAQ -->
  <section id="faq" class="py-24 lg:py-32 bg-white scroll-mt-24">
    <!-- 섹션 헤더 -->
    <div class="text-center mb-16 sm:mb-20">
      <span class="text-[#22304a] font-medium text-sm mb-4 block tracking-wider">FAQ</span>
      <h2 class="text-4xl md:text-5xl font-bold mb-4 text-[#111827]">
        자주 묻는 질문
      </h2>
      <p class="text-lg text-[#22304a] max-w-2xl mx-auto">
        형사사건 의뢰 전 꼭 확인하세요.
      </p>
    </div>

    <div class="max-w-4xl mx-auto divide-y divide-gray-200 px-4">
      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 무료 상담만 받아도 되나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          네, 사건 개요 파악을 위한 무료 상담을 제공하며 이후 정식
          의뢰 여부를 결정하시면 됩니다. 무료 상담 후에도 의뢰 강요는 절대 하지 않으니 부담 없이 상담받으세요.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 사건 진행 비용은 어떻게 책정되나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          죄명·사안 중대성·필요 인력 등을 종합 산정해 맞춤 견적을
          제시합니다. 수임 전 상세한 비용 내역을 투명하게 안내드리며, 성공보수제도 가능합니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 경찰 조사를 받게 되었는데 어떻게 해야 하나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          출석 전 반드시 변호사와 상담하세요. 진술 내용이 향후 재판에 결정적 영향을 미칩니다.
          변호인 동행 조사를 통해 불리한 진술을 방지하고 방어권을 보장받을 수 있습니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 구속될 가능성이 있나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          구속 여부는 증거인멸 우려, 도주 우려, 재범 위험성 등을 종합 판단합니다.
          초기 대응이 중요하며, 구속적부심사나 보석 신청 등 불구속 방어가 가능합니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 전과가 있으면 불리한가요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          전과는 양형에 영향을 미치지만, 동종전과가 아니거나 오래된 전과는 영향이 적습니다.
          반성문, 피해자 합의, 재범방지 대책 등으로 충분히 선처받을 수 있습니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 피해자와 합의는 꼭 해야 하나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          합의는 양형에 매우 중요한 요소입니다. 특히 폭행, 사기, 횡령 등은 합의 여부가
          실형과 집행유예를 가르는 경우가 많습니다. 전문가의 합의 중재로 원만한 해결이 가능합니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 음주운전으로 면허가 취소됐는데 구제 방법이 있나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          혈중알코올농도, 운전 경위, 단속 과정의 하자 등을 검토해 무죄나 감경을 다툴 수 있습니다.
          행정심판이나 행정소송으로 면허 구제도 가능하니 포기하지 마세요.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 성범죄 혐의를 받고 있는데 어떻게 대응해야 하나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          성범죄는 초기 대응이 매우 중요합니다. 무고 주장, 증거 수집, 참고인 확보 등
          체계적 방어가 필요하며, 2차 피해 방지를 위한 신중한 접근이 필요합니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 사건 진행 상황은 어떻게 확인하나요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          담당 변호사가 수사·재판 진행 상황을 실시간으로 보고드립니다.
          중요 일정은 사전 안내드리며, 24시간 핫라인으로 궁금한 점을 즉시 확인하실 수 있습니다.
        </p>
      </details>

      <details class="py-4 group">
        <summary
          class="font-medium cursor-pointer flex justify-between items-center hover:text-blue-600 transition-colors">
          <span>Q. 무죄를 받을 가능성은 어느 정도인가요?</span>
          <span class="text-gray-500 group-open:rotate-180 transition-transform">▼</span>
        </summary>
        <p class="mt-4 text-gray-700 leading-relaxed">
          구체적인 증거와 정황을 분석해야 판단 가능합니다. 무죄 추정 원칙에 따라
          검사가 유죄를 입증해야 하므로, 합리적 의심을 제기할 수 있다면 무죄 가능성이 있습니다.
        </p>
      </details>
    </div>
  </section>

  <!-- JS -->
  <script>
    // 네비게이션 관련 함수들은 nav.js에서 처리됩니다

    // 스크롤 관련 기능들은 nav.js에서 처리됩니다

    // ===================================
    // 스탯 섹션 관련 기능 (카운터 애니메이션)
    // ===================================

    // 숫자 카운트업 애니메이션 (개선된 버전)
    function animateCounter(element) {
      // 이미 애니메이션이 실행 중이면 중복 실행 방지
      if (element.isAnimating) {
        return;
      }
      element.isAnimating = true;

      const target = parseInt(element.getAttribute('data-target'));
      const duration = 3000; // 3초로 조금 더 길게
      const start = 0;
      let current = start;
      let startTime = null;

      // requestAnimationFrame을 사용하여 더 부드러운 애니메이션
      function animate(currentTime) {
        if (startTime === null) startTime = currentTime;
        const progress = Math.min((currentTime - startTime) / duration, 1);

        // easeOutQuart 이징 함수 적용
        const easeProgress = 1 - Math.pow(1 - progress, 4);
        current = Math.floor(target * easeProgress);

        element.textContent = current.toLocaleString();

        if (progress < 1) {
          requestAnimationFrame(animate);
        } else {
          element.textContent = target.toLocaleString();
          element.isAnimating = false;
        }
      }
      requestAnimationFrame(animate);
    }

    // 옵저버 설정 (모바일 최적화)
    const observerOptions = {
      threshold: [0, 0.1, 0.2], // 여러 임계점 설정으로 더 정확한 감지
      rootMargin: '-20px 0px -20px 0px' // 상하 20px 여유 (모바일 친화적)
    };

    // Intersection Observer로 스크롤 시 애니메이션 트리거 (개선된 버전)
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          console.log('스탯 섹션이 화면에 나타남'); // 디버깅용

          const counters = entry.target.querySelectorAll('.counter');
          console.log('찾은 카운터 개수:', counters.length); // 디버깅용

          counters.forEach((counter, index) => {
            if (!counter.classList.contains('animated')) {
              counter.classList.add('animated');

              // 각 카운터를 순차적으로 애니메이션 (0.2초 간격)
              setTimeout(() => {
                animateCounter(counter);
              }, index * 200);
            }
          });

          // 애니메이션이 시작되면 옵저버 해제 (중복 실행 방지)
          observer.unobserve(entry.target);
        }
      });
    }, observerOptions);

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', function () {
      // 네비게이션 관련 설정은 nav.js에서 처리됩니다

      // 스탯 섹션 관찰 시작
      const statsSection = document.getElementById('stats');
      if (statsSection) {
        observer.observe(statsSection);

        // 모바일에서 Intersection Observer가 작동하지 않을 때를 대비한 fallback
        // 5초 후에 스탯 섹션이 여전히 애니메이션되지 않았다면 강제 실행
        setTimeout(() => {
          const counters = statsSection.querySelectorAll('.counter:not(.animated)');
          if (counters.length > 0) {
            console.log('Fallback: 스탯 애니메이션을 강제 실행합니다');
            counters.forEach((counter, index) => {
              counter.classList.add('animated');
              setTimeout(() => {
                animateCounter(counter);
              }, index * 200);
            });
          }
        }, 5000);
      }

      // 두 개의 다이어그램에 대해 초기 확대 적용
      const diagramDefense = document.getElementById('mermaidDiagramDefense');
      if (diagramDefense) {
        diagramDefense.style.transform = `scale(${currentZoomDefense})`;
        diagramDefense.style.transformOrigin = 'top left';
        diagramDefense.style.width = `${100 * currentZoomDefense}%`;
        diagramDefense.style.height = `${100 * currentZoomDefense}%`;
      }

      const diagramComplaint = document.getElementById('mermaidDiagramComplaint');
      if (diagramComplaint) {
        diagramComplaint.style.transform = `scale(${currentZoomComplaint})`;
        diagramComplaint.style.transformOrigin = 'top left';
        diagramComplaint.style.width = `${100 * currentZoomComplaint}%`;
        diagramComplaint.style.height = `${100 * currentZoomComplaint}%`;
      }

      // 오버레이 터치/클릭/스크롤 시 사라지게 - 각 다이어그램에 대해 설정
      function setupOverlay(overlayId, containerId) {
        const overlay = document.getElementById(overlayId);
        if (overlay) {
          const hideOverlay = () => {
            overlay.classList.add('hide');
            setTimeout(() => { overlay.style.display = 'none'; }, 500);
          };
          // 터치, 클릭, 스크롤 모두 감지
          overlay.addEventListener('touchstart', hideOverlay, { once: true });
          overlay.addEventListener('click', hideOverlay, { once: true });
          overlay.addEventListener('wheel', hideOverlay, { once: true });
          // 다이어그램 컨테이너 스크롤도 감지
          const mermaidContainer = document.getElementById(containerId);
          if (mermaidContainer) {
            mermaidContainer.addEventListener('scroll', hideOverlay, { once: true });
          }
        }
      }

      setupOverlay('mermaidOverlayDefense', 'mermaidContainerDefense');
      setupOverlay('mermaidOverlayComplaint', 'mermaidContainerComplaint');
    });

    // Alpine.js x-show 전환시 Mermaid 재렌더링을 위한 이벤트 리스너
    document.addEventListener('alpine:init', () => {
      Alpine.data('processTab', () => ({
        activeProcessTab: 'defense',
        init() {
          // Alpine 컴포넌트 초기화 시점에 첫 렌더링을 수행합니다.
          // setTimeout을 사용해 Alpine이 DOM을 업데이트할 시간을 확보합니다.
          this.$nextTick(() => {
            setTimeout(() => {
              renderMermaidDiagrams('defense');
            }, 100);
          });

          // activeProcessTab 값이 변경될 때마다 해당 탭의 다이어그램을 렌더링합니다.
          this.$watch('activeProcessTab', (newTab) => {
            this.$nextTick(() => {
              setTimeout(() => {
                renderMermaidDiagrams(newTab);
              }, 100);
            });
          });
        }
      }));
    });

    // ===================================
    // 스탯 섹션 관련 기능 (카운터 애니메이션)
    // ===================================

    // 메가메뉴 및 모바일 아코디언 제어는 nav.js에서 처리됩니다
  </script>

</body>

</html>