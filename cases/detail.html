<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>성공사례 상세 - 법무법인(유한) 예일법조</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <style>
        body { font-family: 'Pretendard', sans-serif; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
    </style>

    <!-- Navigation and Footer Modules -->
    <script src="../../assets/js/nav.js"></script>
    <script src="../../assets/js/footer.js"></script>
</head>
<body class="bg-gray-50">
    <!-- 헤더 -->
    <!-- Navigation will be inserted here by nav.js -->
            <!-- 메인 컨텐츠 그리드 -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- 메인 컨텐츠 -->
                <div class="lg:col-span-2">
                    <!-- 헤더 정보 -->
                    <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
                        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6">
                            <div class="flex items-center gap-4 mb-4 sm:mb-0">
                                <span id="case-category" class="px-4 py-2 bg-blue-100 text-blue-700 font-medium rounded-full"></span>
                                <span id="case-date" class="text-gray-500"></span>
                            </div>
                            <div id="case-result" class="flex items-center gap-2">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <span class="text-green-700 font-bold"></span>
                            </div>
                        </div>
                        
                        <h1 id="case-title" class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"></h1>
                        <p id="case-summary" class="text-lg text-gray-600 leading-relaxed"></p>
                    </div>

                    <!-- 사건 배경 -->
                    <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            사건 배경
                        </h2>
                        <p id="case-background" class="text-gray-700 leading-relaxed"></p>
                    </div>

                    <!-- 변호 전략 -->
                    <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                            <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                                </svg>
                            </div>
                            변호 전략
                        </h2>
                        <div id="case-strategy" class="text-gray-700 leading-relaxed"></div>
                    </div>

                    <!-- 주요 쟁점 및 어려움 -->
                    <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                            <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                            </div>
                            주요 쟁점 및 어려움
                        </h2>
                        <p id="case-challenges" class="text-gray-700 leading-relaxed"></p>
                    </div>

                    <!-- 최종 결과 -->
                    <div class="bg-white rounded-2xl p-8 shadow-sm">
                        <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items-center gap-3">
                            <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                                </svg>
                            </div>
                            최종 결과
                        </h2>
                        <p id="case-outcome" class="text-gray-700 leading-relaxed"></p>
                    </div>
                </div>

                <!-- 사이드바 -->
                <div class="lg:col-span-1">
                    <!-- 사건 정보 요약 -->
                    <div class="bg-white rounded-2xl p-6 mb-8 shadow-sm sticky top-8">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">사건 정보</h3>
                        <dl class="space-y-4">
                            <div>
                                <dt class="text-sm font-medium text-gray-500 mb-1">분야</dt>
                                <dd id="sidebar-category" class="text-sm text-gray-900"></dd>
                            </div>
                            <div>
                                <dt class="text-sm font-medium text-gray-500 mb-1">법원</dt>
                                <dd id="sidebar-court" class="text-sm text-gray-900"></dd>
                            </div>
                            <div>
                                <dt class="text-sm font-medium text-gray-500 mb-1">결과</dt>
                                <dd id="sidebar-result" class="text-sm text-gray-900"></dd>
                            </div>
                            <div>
                                <dt class="text-sm font-medium text-gray-500 mb-1">판결일</dt>
                                <dd id="sidebar-date" class="text-sm text-gray-900"></dd>
                            </div>
                        </dl>

                        <!-- 태그 -->
                        <div class="mt-6 pt-6 border-t border-gray-100">
                            <h4 class="text-sm font-medium text-gray-500 mb-3">관련 키워드</h4>
                            <div id="case-tags" class="flex flex-wrap gap-2">
                                <!-- 태그들이 JavaScript로 생성됩니다 -->
                            </div>
                        </div>

                        <!-- 상담 문의 버튼 -->
                        <div class="mt-6 pt-6 border-t border-gray-100">
                            <a href="tel:02-587-7787" 
                               class="w-full bg-blue-600 text-white py-3 px-4 rounded-xl text-center font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                </svg>
                                유사 사건 상담받기
                            </a>
                        </div>
                    </div>

                    <!-- 관련 성공사례 -->
                    <div class="bg-white rounded-2xl p-6 shadow-sm">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">관련 성공사례</h3>
                        <div id="related-cases" class="space-y-4">
                            <!-- 관련 사례들이 JavaScript로 생성됩니다 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 에러 상태 -->
        <div id="error-state" class="hidden text-center py-20">
            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
            </div>
            <h2 class="text-2xl font-bold text-gray-900 mb-2">사례를 찾을 수 없습니다</h2>
            <p class="text-gray-600 mb-6">요청하신 성공사례를 찾을 수 없습니다.</p>
            <a href="index.html" class="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                성공사례 목록으로 돌아가기
            </a>
        </div>
    </main>

    <!-- CTA 섹션 -->
    <section class="bg-gray-900 text-white py-16">
        <div class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold mb-4">비슷한 사건으로 고민이신가요?</h2>
            <p class="text-xl mb-8 opacity-90">전문 변호사가 직접 상담해드립니다</p>
            <a href="tel:02-587-7787" class="inline-flex items-center gap-3 bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-bold hover:bg-blue-700 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
                02-587-7787
            </a>
        </div>
    </section>

    <script>
        // URL 파라미터에서 ID 추출
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // 날짜 포맷팅
        function formatDate(dateString) {
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}년 ${month}월 ${day}일`;
        }

        // 전략 텍스트를 리스트로 변환
        function formatStrategy(strategyText) {
            if (strategyText.includes('1.')) {
                // 숫자로 시작하는 리스트인 경우
                return '<ul class="list-decimal list-inside space-y-2">' + 
                       strategyText.split(/\d+\./).slice(1).map(item => 
                           `<li class="text-gray-700">${item.trim()}</li>`
                       ).join('') + 
                       '</ul>';
            }
            return `<p class="text-gray-700">${strategyText}</p>`;
        }

        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', async function() {
            const caseId = getUrlParameter('id');
            
            if (!caseId) {
                showErrorState();
                return;
            }

            try {
                // JSON 데이터 로드
                const response = await fetch('./data/cases.json');
                if (!response.ok) {
                    throw new Error('데이터를 불러올 수 없습니다.');
                }
                
                const cases = await response.json();
                const currentCase = cases.find(c => c.id == caseId);
                
                if (!currentCase) {
                    showErrorState();
                    return;
                }

                // 페이지 제목 업데이트
                document.title = `${currentCase.title} - 성공사례 - 법무법인(유한) 예일법조`;

                // 케이스 상세 정보 표시
                displayCaseDetail(currentCase);
                
                // 관련 사례 표시 (같은 카테고리의 다른 사례들)
                displayRelatedCases(cases, currentCase);
                
                // 로딩 숨기고 컨텐츠 표시
                document.getElementById('loading').style.display = 'none';
                document.getElementById('case-detail').classList.remove('hidden');
                
            } catch (error) {
                console.error('데이터 로딩 실패:', error);
                showErrorState();
            }
        });

        // 케이스 상세 정보 표시
        function displayCaseDetail(caseData) {
            // 브레드크럼
            document.getElementById('breadcrumb-category').textContent = caseData.category;
            
            // 헤더 정보
            document.getElementById('case-category').textContent = caseData.category;
            document.getElementById('case-date').textContent = formatDate(caseData.date);
            document.getElementById('case-result').querySelector('span').textContent = caseData.result;
            document.getElementById('case-title').textContent = caseData.title;
            document.getElementById('case-summary').textContent = caseData.summary;
            
            // 상세 정보
            document.getElementById('case-background').textContent = caseData.details.background;
            document.getElementById('case-strategy').innerHTML = formatStrategy(caseData.details.strategy);
            document.getElementById('case-challenges').textContent = caseData.details.challenges;
            document.getElementById('case-outcome').textContent = caseData.details.outcome;
            
            // 사이드바 정보
            document.getElementById('sidebar-category').textContent = caseData.category;
            document.getElementById('sidebar-court').textContent = caseData.court;
            document.getElementById('sidebar-result').textContent = caseData.result;
            document.getElementById('sidebar-date').textContent = formatDate(caseData.date);
            
            // 태그 표시
            const tagsContainer = document.getElementById('case-tags');
            tagsContainer.innerHTML = caseData.tags.map(tag => 
                `<span class="px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full">${tag}</span>`
            ).join('');
        }

        // 관련 사례 표시
        function displayRelatedCases(allCases, currentCase) {
            const relatedCases = allCases
                .filter(c => c.id !== currentCase.id && c.category === currentCase.category)
                .slice(0, 3);
            
            const container = document.getElementById('related-cases');
            
            if (relatedCases.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-sm">관련 사례가 없습니다.</p>';
                return;
            }
            
            container.innerHTML = relatedCases.map(case_ => `
                <a href="detail.html?id=${case_.id}" class="block p-4 border border-gray-100 rounded-xl hover:border-blue-200 hover:bg-blue-50 transition-colors">
                    <div class="text-sm text-blue-600 font-medium mb-1">${case_.category}</div>
                    <h4 class="text-sm font-medium text-gray-900 line-clamp-2 mb-2">${case_.title}</h4>
                    <div class="text-xs text-green-600">${case_.result}</div>
                </a>
            `).join('');
        }

        // 에러 상태 표시
        function showErrorState() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error-state').classList.remove('hidden');
        }
    </script>
    <!-- Footer will be inserted here by footer.js --></body>
</html> 